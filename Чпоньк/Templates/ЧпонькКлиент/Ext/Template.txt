Процедура ПроверкаВремениИзмененияЗавершена(ВремяИзменения, ИмяФайла) Экспорт
	
	ПодключенныйФайл = Чпоньк.ПрочитатьНастройки("ПодключенныеФайлы")[ИмяФайла];
	
	Если ПодключенныйФайл <> Неопределено
		И ВремяИзменения <> ПодключенныйФайл.ВремяИзменения Тогда
		
		ТекстовыйДокумент = Новый ТекстовыйДокумент;
		
		ДополнительныеПараметры = Новый Структура;
		ДополнительныеПараметры.Вставить("ИмяФайла", ИмяФайла);
		ДополнительныеПараметры.Вставить("ВремяИзменения", ВремяИзменения);
		ДополнительныеПараметры.Вставить("ТекстовыйДокумент", ТекстовыйДокумент);
		
		ОповещениеОЗавершенииЧтенияФайла = Новый ОписаниеОповещения(
			"ЧтениеФайлаЗавершено",
			ЭтотОбъект,
			ДополнительныеПараметры);
		
		ТекстовыйДокумент.НачатьЧтение(ОповещениеОЗавершенииЧтенияФайла, ИмяФайла, КодировкаТекста.UTF8);
		
	КонецЕсли;
	
КонецПроцедуры

Процедура ЧтениеФайлаЗавершено(ДополнительныеПараметры) Экспорт
	
	ПодключенныеФайлы = Чпоньк.ПрочитатьНастройки("ПодключенныеФайлы");
	ПодключенныйФайл = ПодключенныеФайлы[ДополнительныеПараметры.ИмяФайла];
	
	Если ПодключенныйФайл = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	ПодключенныйФайл.ВремяИзменения = ДополнительныеПараметры.ВремяИзменения;
	ПодключенныйФайл.ТекстФайла = ДополнительныеПараметры.ТекстовыйДокумент;
	
	ПодключенныеФайлы.Вставить(ДополнительныеПараметры.ИмяФайла, ПодключенныйФайл);
	
	Чпоньк.ЗаписатьНастройки("ПодключенныеФайлы", ПодключенныеФайлы);
	
КонецПроцедуры